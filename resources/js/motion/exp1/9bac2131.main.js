(function(){(function(){var t=this,n=t._,e={},r=Array.prototype,i=Object.prototype,u=Function.prototype,o=r.push,a=r.slice,s=r.concat,c=i.toString,l=i.hasOwnProperty,f=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,y=r.filter,v=r.every,m=r.some,g=r.indexOf,x=r.lastIndexOf,w=Array.isArray,b=Object.keys,k=u.bind,E=function(t){return t instanceof E?t:this instanceof E?(this._wrapped=t,void 0):new E(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=E),exports._=E):t._=E,E.VERSION="1.4.4";var _=E.each=E.forEach=function(t,n,r){if(null!=t)if(f&&t.forEach===f)t.forEach(n,r);else if(t.length===+t.length){for(var i=0,u=t.length;u>i;i++)if(n.call(r,t[i],i,t)===e)return}else for(var o in t)if(E.has(t,o)&&n.call(r,t[o],o,t)===e)return};E.map=E.collect=function(t,n,e){var r=[];return null==t?r:h&&t.map===h?t.map(n,e):(_(t,function(t,i,u){r[r.length]=n.call(e,t,i,u)}),r)};var M="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return r&&(n=E.bind(n,r)),i?t.reduce(n,e):t.reduce(n);if(_(t,function(t,u,o){i?e=n.call(r,e,t,u,o):(e=t,i=!0)}),!i)throw new TypeError(M);return e},E.reduceRight=E.foldr=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),d&&t.reduceRight===d)return r&&(n=E.bind(n,r)),i?t.reduceRight(n,e):t.reduceRight(n);var u=t.length;if(u!==+u){var o=E.keys(t);u=o.length}if(_(t,function(a,s,c){s=o?o[--u]:--u,i?e=n.call(r,e,t[s],s,c):(e=t[s],i=!0)}),!i)throw new TypeError(M);return e},E.find=E.detect=function(t,n,e){var r;return j(t,function(t,i,u){return n.call(e,t,i,u)?(r=t,!0):void 0}),r},E.filter=E.select=function(t,n,e){var r=[];return null==t?r:y&&t.filter===y?t.filter(n,e):(_(t,function(t,i,u){n.call(e,t,i,u)&&(r[r.length]=t)}),r)},E.reject=function(t,n,e){return E.filter(t,function(t,r,i){return!n.call(e,t,r,i)},e)},E.every=E.all=function(t,n,r){n||(n=E.identity);var i=!0;return null==t?i:v&&t.every===v?t.every(n,r):(_(t,function(t,u,o){return(i=i&&n.call(r,t,u,o))?void 0:e}),!!i)};var j=E.some=E.any=function(t,n,r){n||(n=E.identity);var i=!1;return null==t?i:m&&t.some===m?t.some(n,r):(_(t,function(t,u,o){return i||(i=n.call(r,t,u,o))?e:void 0}),!!i)};E.contains=E.include=function(t,n){return null==t?!1:g&&t.indexOf===g?-1!=t.indexOf(n):j(t,function(t){return t===n})},E.invoke=function(t,n){var e=a.call(arguments,2),r=E.isFunction(n);return E.map(t,function(t){return(r?n:t[n]).apply(t,e)})},E.pluck=function(t,n){return E.map(t,function(t){return t[n]})},E.where=function(t,n,e){return E.isEmpty(n)?e?null:[]:E[e?"find":"filter"](t,function(t){for(var e in n)if(n[e]!==t[e])return!1;return!0})},E.findWhere=function(t,n){return E.where(t,n,!0)},E.max=function(t,n,e){if(!n&&E.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!n&&E.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return _(t,function(t,i,u){var o=n?n.call(e,t,i,u):t;o>=r.computed&&(r={value:t,computed:o})}),r.value},E.min=function(t,n,e){if(!n&&E.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!n&&E.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return _(t,function(t,i,u){var o=n?n.call(e,t,i,u):t;r.computed>o&&(r={value:t,computed:o})}),r.value},E.shuffle=function(t){var n,e=0,r=[];return _(t,function(t){n=E.random(e++),r[e-1]=r[n],r[n]=t}),r};var C=function(t){return E.isFunction(t)?t:function(n){return n[t]}};E.sortBy=function(t,n,e){var r=C(n);return E.pluck(E.map(t,function(t,n,i){return{value:t,index:n,criteria:r.call(e,t,n,i)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return t.index<n.index?-1:1}),"value")};var A=function(t,n,e,r){var i={},u=C(n||E.identity);return _(t,function(n,o){var a=u.call(e,n,o,t);r(i,a,n)}),i};E.groupBy=function(t,n,e){return A(t,n,e,function(t,n,e){(E.has(t,n)?t[n]:t[n]=[]).push(e)})},E.countBy=function(t,n,e){return A(t,n,e,function(t,n){E.has(t,n)||(t[n]=0),t[n]++})},E.sortedIndex=function(t,n,e,r){e=null==e?E.identity:C(e);for(var i=e.call(r,n),u=0,o=t.length;o>u;){var a=u+o>>>1;i>e.call(r,t[a])?u=a+1:o=a}return u},E.toArray=function(t){return t?E.isArray(t)?a.call(t):t.length===+t.length?E.map(t,E.identity):E.values(t):[]},E.size=function(t){return null==t?0:t.length===+t.length?t.length:E.keys(t).length},E.first=E.head=E.take=function(t,n,e){return null==t?void 0:null==n||e?t[0]:a.call(t,0,n)},E.initial=function(t,n,e){return a.call(t,0,t.length-(null==n||e?1:n))},E.last=function(t,n,e){return null==t?void 0:null==n||e?t[t.length-1]:a.call(t,Math.max(t.length-n,0))},E.rest=E.tail=E.drop=function(t,n,e){return a.call(t,null==n||e?1:n)},E.compact=function(t){return E.filter(t,E.identity)};var O=function(t,n,e){return _(t,function(t){E.isArray(t)?n?o.apply(e,t):O(t,n,e):e.push(t)}),e};E.flatten=function(t,n){return O(t,n,[])},E.without=function(t){return E.difference(t,a.call(arguments,1))},E.uniq=E.unique=function(t,n,e,r){E.isFunction(n)&&(r=e,e=n,n=!1);var i=e?E.map(t,e,r):t,u=[],o=[];return _(i,function(e,r){(n?r&&o[o.length-1]===e:E.contains(o,e))||(o.push(e),u.push(t[r]))}),u},E.union=function(){return E.uniq(s.apply(r,arguments))},E.intersection=function(t){var n=a.call(arguments,1);return E.filter(E.uniq(t),function(t){return E.every(n,function(n){return E.indexOf(n,t)>=0})})},E.difference=function(t){var n=s.apply(r,a.call(arguments,1));return E.filter(t,function(t){return!E.contains(n,t)})},E.zip=function(){for(var t=a.call(arguments),n=E.max(E.pluck(t,"length")),e=Array(n),r=0;n>r;r++)e[r]=E.pluck(t,""+r);return e},E.object=function(t,n){if(null==t)return{};for(var e={},r=0,i=t.length;i>r;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},E.indexOf=function(t,n,e){if(null==t)return-1;var r=0,i=t.length;if(e){if("number"!=typeof e)return r=E.sortedIndex(t,n),t[r]===n?r:-1;r=0>e?Math.max(0,i+e):e}if(g&&t.indexOf===g)return t.indexOf(n,e);for(;i>r;r++)if(t[r]===n)return r;return-1},E.lastIndexOf=function(t,n,e){if(null==t)return-1;var r=null!=e;if(x&&t.lastIndexOf===x)return r?t.lastIndexOf(n,e):t.lastIndexOf(n);for(var i=r?e:t.length;i--;)if(t[i]===n)return i;return-1},E.range=function(t,n,e){1>=arguments.length&&(n=t||0,t=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((n-t)/e),0),i=0,u=Array(r);r>i;)u[i++]=t,t+=e;return u},E.bind=function(t,n){if(t.bind===k&&k)return k.apply(t,a.call(arguments,1));var e=a.call(arguments,2);return function(){return t.apply(n,e.concat(a.call(arguments)))}},E.partial=function(t){var n=a.call(arguments,1);return function(){return t.apply(this,n.concat(a.call(arguments)))}},E.bindAll=function(t){var n=a.call(arguments,1);return 0===n.length&&(n=E.functions(t)),_(n,function(n){t[n]=E.bind(t[n],t)}),t},E.memoize=function(t,n){var e={};return n||(n=E.identity),function(){var r=n.apply(this,arguments);return E.has(e,r)?e[r]:e[r]=t.apply(this,arguments)}},E.delay=function(t,n){var e=a.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},E.defer=function(t){return E.delay.apply(E,[t,1].concat(a.call(arguments,1)))},E.throttle=function(t,n){var e,r,i,u,o=0,a=function(){o=new Date,i=null,u=t.apply(e,r)};return function(){var s=new Date,c=n-(s-o);return e=this,r=arguments,0>=c?(clearTimeout(i),i=null,o=s,u=t.apply(e,r)):i||(i=setTimeout(a,c)),u}},E.debounce=function(t,n,e){var r,i;return function(){var u=this,o=arguments,a=function(){r=null,e||(i=t.apply(u,o))},s=e&&!r;return clearTimeout(r),r=setTimeout(a,n),s&&(i=t.apply(u,o)),i}},E.once=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},E.wrap=function(t,n){return function(){var e=[t];return o.apply(e,arguments),n.apply(this,e)}},E.compose=function(){var t=arguments;return function(){for(var n=arguments,e=t.length-1;e>=0;e--)n=[t[e].apply(this,n)];return n[0]}},E.after=function(t,n){return 0>=t?n():function(){return 1>--t?n.apply(this,arguments):void 0}},E.keys=b||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var n=[];for(var e in t)E.has(t,e)&&(n[n.length]=e);return n},E.values=function(t){var n=[];for(var e in t)E.has(t,e)&&n.push(t[e]);return n},E.pairs=function(t){var n=[];for(var e in t)E.has(t,e)&&n.push([e,t[e]]);return n},E.invert=function(t){var n={};for(var e in t)E.has(t,e)&&(n[t[e]]=e);return n},E.functions=E.methods=function(t){var n=[];for(var e in t)E.isFunction(t[e])&&n.push(e);return n.sort()},E.extend=function(t){return _(a.call(arguments,1),function(n){if(n)for(var e in n)t[e]=n[e]}),t},E.pick=function(t){var n={},e=s.apply(r,a.call(arguments,1));return _(e,function(e){e in t&&(n[e]=t[e])}),n},E.omit=function(t){var n={},e=s.apply(r,a.call(arguments,1));for(var i in t)E.contains(e,i)||(n[i]=t[i]);return n},E.defaults=function(t){return _(a.call(arguments,1),function(n){if(n)for(var e in n)null==t[e]&&(t[e]=n[e])}),t},E.clone=function(t){return E.isObject(t)?E.isArray(t)?t.slice():E.extend({},t):t},E.tap=function(t,n){return n(t),t};var q=function(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof E&&(t=t._wrapped),n instanceof E&&(n=n._wrapped);var i=c.call(t);if(i!=c.call(n))return!1;switch(i){case"[object String]":return t==n+"";case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var u=e.length;u--;)if(e[u]==t)return r[u]==n;e.push(t),r.push(n);var o=0,a=!0;if("[object Array]"==i){if(o=t.length,a=o==n.length)for(;o--&&(a=q(t[o],n[o],e,r)););}else{var s=t.constructor,l=n.constructor;if(s!==l&&!(E.isFunction(s)&&s instanceof s&&E.isFunction(l)&&l instanceof l))return!1;for(var f in t)if(E.has(t,f)&&(o++,!(a=E.has(n,f)&&q(t[f],n[f],e,r))))break;if(a){for(f in n)if(E.has(n,f)&&!o--)break;a=!o}}return e.pop(),r.pop(),a};E.isEqual=function(t,n){return q(t,n,[],[])},E.isEmpty=function(t){if(null==t)return!0;if(E.isArray(t)||E.isString(t))return 0===t.length;for(var n in t)if(E.has(t,n))return!1;return!0},E.isElement=function(t){return!(!t||1!==t.nodeType)},E.isArray=w||function(t){return"[object Array]"==c.call(t)},E.isObject=function(t){return t===Object(t)},_(["Arguments","Function","String","Number","Date","RegExp"],function(t){E["is"+t]=function(n){return c.call(n)=="[object "+t+"]"}}),E.isArguments(arguments)||(E.isArguments=function(t){return!(!t||!E.has(t,"callee"))}),E.isFunction=function(t){return"function"==typeof t},E.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},E.isNaN=function(t){return E.isNumber(t)&&t!=+t},E.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},E.isNull=function(t){return null===t},E.isUndefined=function(t){return void 0===t},E.has=function(t,n){return l.call(t,n)},E.noConflict=function(){return t._=n,this},E.identity=function(t){return t},E.times=function(t,n,e){for(var r=Array(t),i=0;t>i;i++)r[i]=n.call(e,i);return r},E.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};P.unescape=E.invert(P.escape);var T={escape:RegExp("["+E.keys(P.escape).join("")+"]","g"),unescape:RegExp("("+E.keys(P.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(t){E[t]=function(n){return null==n?"":(""+n).replace(T[t],function(n){return P[t][n]})}}),E.result=function(t,n){if(null==t)return null;var e=t[n];return E.isFunction(e)?e.call(t):e},E.mixin=function(t){_(E.functions(t),function(n){var e=E[n]=t[n];E.prototype[n]=function(){var t=[this._wrapped];return o.apply(t,arguments),F.call(this,e.apply(E,t))}})};var D=0;E.uniqueId=function(t){var n=++D+"";return t?t+n:n},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(t,n,e){var r;e=E.defaults({},e,E.templateSettings);var i=RegExp([(e.escape||I).source,(e.interpolate||I).source,(e.evaluate||I).source].join("|")+"|$","g"),u=0,o="__p+='";t.replace(i,function(n,e,r,i,a){return o+=t.slice(u,a).replace(R,function(t){return"\\"+L[t]}),e&&(o+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),u=a+n.length,n}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(n)return r(n,E);var s=function(t){return r.call(this,t,E)};return s.source="function("+(e.variable||"obj")+"){\n"+o+"}",s},E.chain=function(t){return E(t).chain()};var F=function(t){return this._chain?E(t).chain():t};E.mixin(E),_(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=r[t];E.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],F.call(this,e)}}),_(["concat","join","slice"],function(t){var n=r[t];E.prototype[t]=function(){return F.call(this,n.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),define("underscore",function(t){return function(){var n;return n||t._}}(this)),define("vector2",[],function(){var t=function(t,n){this.x=t||0,this.y=n||0};return t.prototype={reset:function(t,n){return this.x=t,this.y=n,this},toString:function(t){t=t||3;var n=Math.pow(10,t);return"["+Math.round(this.x*n)/n+", "+Math.round(this.y*n)/n+"]"},clone:function(){return new t(this.x,this.y)},copyTo:function(t){t.x=this.x,t.y=this.y},copyFrom:function(t){this.x=t.x,this.y=t.y},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},magnitudeSquared:function(){return this.x*this.x+this.y*this.y},normalise:function(){var t=this.magnitude();return this.x=this.x/t,this.y=this.y/t,this},reverse:function(){return this.x=-this.x,this.y=-this.y,this},plusEq:function(t){return this.x+=t.x,this.y+=t.y,this},plusNew:function(n){return new t(this.x+n.x,this.y+n.y)},minusEq:function(t){return this.x-=t.x,this.y-=t.y,this},minusNew:function(n){return new t(this.x-n.x,this.y-n.y)},multiplyEq:function(t){return this.x*=t,this.y*=t,this},multiplyNew:function(t){var n=this.clone();return n.multiplyEq(t)},divideEq:function(t){return this.x/=t,this.y/=t,this},divideNew:function(t){var n=this.clone();return n.divideEq(t)},dot:function(t){return this.x*t.x+this.y*t.y},angle:function(t){return Math.atan2(this.y,this.x)*(t?1:Vector2Const.TO_DEGREES)},rotate:function(t,n){var e=Math.cos(t*(n?1:Vector2Const.TO_RADIANS)),r=Math.sin(t*(n?1:Vector2Const.TO_RADIANS));return Vector2Const.temp.copyFrom(this),this.x=Vector2Const.temp.x*e-Vector2Const.temp.y*r,this.y=Vector2Const.temp.x*r+Vector2Const.temp.y*e,this},equals:function(t){return this.x==t.x&&this.y==t.x},isCloseTo:function(t,n){return this.equals(t)?!0:(Vector2Const.temp.copyFrom(this),Vector2Const.temp.minusEq(t),n*n>Vector2Const.temp.magnitudeSquared())},rotateAroundPoint:function(t,n,e){Vector2Const.temp.copyFrom(this),Vector2Const.temp.minusEq(t),Vector2Const.temp.rotate(n,e),Vector2Const.temp.plusEq(t),this.copyFrom(Vector2Const.temp)},isMagLessThan:function(t){return t*t>this.magnitudeSquared()},isMagGreaterThan:function(t){return this.magnitudeSquared()>t*t}},Vector2Const={TO_DEGREES:180/Math.PI,TO_RADIANS:Math.PI/180,temp:new t},t}),define("player",["vector2"],function(t){var n=function(n,e){var r=this.pos=new t(n,e),i=this.vel=new t(0,0),u=this.drag=new t(.95,.96);this.gravity=1,this.width=24,this.height=43;var o=2;this.update=function(){i.x*=u.x,i.y*=u.y,i.y+=this.gravity,r.plusEq(i)},this.render=function(t){t.save(),t.fillStyle="rgba(255,255,255,1)",t.fillRect(this.getLeft(),this.getTop(),this.width,this.height),t.restore()},this.moveLeft=function(){this.vel.x-=o},this.moveRight=function(){console.log("right"),this.vel.x+=o},this.moveUp=function(){this.vel.y-=o},this.moveDown=function(){this.vel.y+=o},this.getLeft=function(){return r.x},this.getRight=function(){return r.x+this.width},this.getTop=function(){return r.y-this.height},this.getBottom=function(){return r.y}};return n}),define("keytracker",[],function(){var t=function(){this.Key={UP:38,LEFT:37,RIGHT:39,DOWN:40,SPACE:32},this.keysPressed={},this.keyDownListeners=[],this.keyUpListeners=[],this.isKeyDown=function(t){return"string"==typeof t&&(t=t.charCodeAt(0)),this.keysPressed[t]},this.addKeyDownListener=function(t,n){"string"==typeof t&&(t=t.charCodeAt(0)),this.keyDownListeners.push({key:t,func:n})},this.addKeyUpListener=function(t,n){"string"==typeof t&&(t=t.charCodeAt(0)),this.keyUpListeners.push({key:t,func:n})}};return t}),define("controller",["keytracker"],function(t){var n={};return n=function(){var n=new t;return document.addEventListener("keydown",function(t){for(var e=0;n.keyDownListeners.length>e;e++)t.keyCode!=keyDownListeners[e].key||n.keysPressed[t.keyCode]||n.keyDownListeners[e].func();n.keysPressed[t.keyCode]=!0,console.log("key down "+t.keyCode)}),document.addEventListener("keyup",function(t){n.keysPressed[t.keyCode]=!1;for(var e=0;n.keyUpListeners.length>e;e++)t.keyCode==n.keyUpListeners[e].key&&n.keyUpListeners[e].func()}),n}}),define("creativejs",[],function(){var t={random:function(t,n){return void 0===t?(t=0,n=1):void 0===n&&(n=t,t=0),Math.random()*(n-t)+t},randomInteger:function(t,n){return void 0===n&&(n=t,t=0),Math.floor(Math.random()*(n+1-t))+t},clamp:function(t,n,e){if(n>e){var r=n;n=e,e=r}return Math.max(n,Math.min(t,e))},map:function(t,n,e,r,i,u){var o=(t-n)/(e-n)*(i-r)+r;return u?this.clamp(o,r,i):o},dist:function(t,n,e,r){return e-=t,r-=n,Math.sqrt(e*e+r*r)},scale:function(t,n,e,r,i){var u=e-n,o=i-r,a=(t-n)/u;return r+a*o},dist2D:function(t,n){var e=t.x-n.x,r=t.y-n.y;return e*e+r*r},radians:function(t){return t*Math.PI/180},degrees:function(t){return 180*t/Math.PI},rgb:function(t,n,e){return"rgb("+this.clamp(Math.round(t),0,255)+", "+this.clamp(Math.round(n),0,255)+", "+this.clamp(Math.round(e),0,255)+")"},rgba:function(t,n,e,r){return"rgba("+this.clamp(Math.round(t),0,255)+", "+this.clamp(Math.round(n),0,255)+", "+this.clamp(Math.round(e),0,255)+", "+this.clamp(r,0,1)+")"},hsl:function(t,n,e){return"hsl("+t+", "+this.clamp(n,0,100)+"%, "+this.clamp(e,0,100)+"%)"},hsla:function(t,n,e,r){return"hsla("+t+", "+this.clamp(n,0,100)+"%, "+this.clamp(e,0,100)+"%, "+this.clamp(r,0,1)+")"}};return t}),define("graphics",[],function(){var t={};return t.circle=function(t,n,e){this.beginPath(),this.arc(t,n,e,0,2*Math.PI,!0)},t.fillCircle=function(t,n,e){this.circle(t,n,e),this.fill(),this.beginPath()},t.strokeCircle=function(t,n,e){this.circle(t,n,e),this.stroke(),this.beginPath()},t.ellipse=function(t,n,e,r){this.beginPath();for(var i=0;2*Math.PI>i;i+=Math.PI/16)this.lineTo(t+Math.cos(i)*e/2,n+Math.sin(i)*r/2);this.closePath()},t.fillEllipse=function(t,n,e,r){this.ellipse(t,n,e,r),this.fill(),this.beginPath()},t.strokeEllipse=function(t,n,e,r){this.ellipse(t,n,e,r),this.stroke(),this.beginPath()},t.line=function(t,n,e,r){this.beginPath(),this.moveTo(t,n),this.lineTo(e,r),this.stroke(),this.beginPath()},t}),define("scene",[],function(){var t={render:function(t){t.strokeStyle="red",t.circle(20,20,200),t.stroke()}};return t}),define("app",["underscore","player","controller","creativejs","graphics","scene"],function(t,n,e,r,i,u){var o={};return o=function(){this.self=this,this.ctx=null,this.width=window.innerWidth,this.height=window.innerHeight,this.player,this.controller,this.scene},o.prototype.draw=function(){ctx.clearRect(0,0,canvas.width,canvas.height),this.player.update(),this.managePositions(this.player,this.controller),u.render(ctx),this.player.render(ctx)},o.prototype.setup=function(t,n){if(!t&&!n)var t=this.width,n=this.height;var e=this.initCanvas(t,n);return this.initVars(t,n),this.initObjects(),e},o.prototype.initCanvas=function(t){return canvas=document.getElementById(t),ctx=canvas.getContext("2d"),canvas},o.prototype.initVars=function(n,e){t.extend(ctx,i),this.ctx=ctx,this.width=n,this.height=e},o.prototype.initObjects=function(){this.player=new n(100,0),this.controller=new e},o.prototype.managePositions=function(t,n){0>t.pos.y?(t.pos.y=0,t.vel.y=0):t.getBottom()>this.height&&(t.pos.y=0,t.vel.y=0),n.isKeyDown(n.Key.LEFT)?t.moveLeft():n.isKeyDown(n.Key.RIGHT)&&t.moveRight(),n.isKeyDown(n.Key.UP)?t.moveUp():n.isKeyDown(n.Key.DOWN)&&t.moveDown()},o}),require.config({paths:{underscore:"../../components/underscore/underscore",creativejs:"../../libs/creativejs",vector2:"../../libs/Vector2",keytracker:"../../libs/KeyTracker",graphics:"../../libs/Graphics"},shim:{underscore:{exports:"_"}}}),require(["app"],function(t){function n(){on2.running&&(on2.on&&(on2.count++,on2.tgt.draw()),requestAnimationFrame(n))}window.on2={count:0,running:!0,on:!1,tgt:null},window.addEventListener("load",n,!0);var e=function(n){function e(){window.on2.tgt=i,window.on2.on=!0,console.log("2 run")}function r(){window.on2.tgt=null,window.on2.on=!1,console.log("2 stop")}console.log(n);var i=new t,u=i.setup(n);u.addEventListener("mouseover",e),u.addEventListener("mouseout",r)};e("canvas2")}),define("main",function(){})})();