(function(){(function(){var n=this,t=n._,e={},r=Array.prototype,i=Object.prototype,u=Function.prototype,o=r.push,a=r.slice,s=r.concat,c=i.toString,l=i.hasOwnProperty,f=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,y=r.filter,v=r.every,m=r.some,g=r.indexOf,x=r.lastIndexOf,w=Array.isArray,b=Object.keys,k=u.bind,E=function(n){return n instanceof E?n:this instanceof E?(this._wrapped=n,void 0):new E(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=E),exports._=E):n._=E,E.VERSION="1.4.4";var _=E.each=E.forEach=function(n,t,r){if(null!=n)if(f&&n.forEach===f)n.forEach(t,r);else if(n.length===+n.length){for(var i=0,u=n.length;u>i;i++)if(t.call(r,n[i],i,n)===e)return}else for(var o in n)if(E.has(n,o)&&t.call(r,n[o],o,n)===e)return};E.map=E.collect=function(n,t,e){var r=[];return null==n?r:h&&n.map===h?n.map(t,e):(_(n,function(n,i,u){r[r.length]=t.call(e,n,i,u)}),r)};var j="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(n,t,e,r){var i=arguments.length>2;if(null==n&&(n=[]),p&&n.reduce===p)return r&&(t=E.bind(t,r)),i?n.reduce(t,e):n.reduce(t);if(_(n,function(n,u,o){i?e=t.call(r,e,n,u,o):(e=n,i=!0)}),!i)throw new TypeError(j);return e},E.reduceRight=E.foldr=function(n,t,e,r){var i=arguments.length>2;if(null==n&&(n=[]),d&&n.reduceRight===d)return r&&(t=E.bind(t,r)),i?n.reduceRight(t,e):n.reduceRight(t);var u=n.length;if(u!==+u){var o=E.keys(n);u=o.length}if(_(n,function(a,s,c){s=o?o[--u]:--u,i?e=t.call(r,e,n[s],s,c):(e=n[s],i=!0)}),!i)throw new TypeError(j);return e},E.find=E.detect=function(n,t,e){var r;return M(n,function(n,i,u){return t.call(e,n,i,u)?(r=n,!0):void 0}),r},E.filter=E.select=function(n,t,e){var r=[];return null==n?r:y&&n.filter===y?n.filter(t,e):(_(n,function(n,i,u){t.call(e,n,i,u)&&(r[r.length]=n)}),r)},E.reject=function(n,t,e){return E.filter(n,function(n,r,i){return!t.call(e,n,r,i)},e)},E.every=E.all=function(n,t,r){t||(t=E.identity);var i=!0;return null==n?i:v&&n.every===v?n.every(t,r):(_(n,function(n,u,o){return(i=i&&t.call(r,n,u,o))?void 0:e}),!!i)};var M=E.some=E.any=function(n,t,r){t||(t=E.identity);var i=!1;return null==n?i:m&&n.some===m?n.some(t,r):(_(n,function(n,u,o){return i||(i=t.call(r,n,u,o))?e:void 0}),!!i)};E.contains=E.include=function(n,t){return null==n?!1:g&&n.indexOf===g?-1!=n.indexOf(t):M(n,function(n){return n===t})},E.invoke=function(n,t){var e=a.call(arguments,2),r=E.isFunction(t);return E.map(n,function(n){return(r?t:n[t]).apply(n,e)})},E.pluck=function(n,t){return E.map(n,function(n){return n[t]})},E.where=function(n,t,e){return E.isEmpty(t)?e?null:[]:E[e?"find":"filter"](n,function(n){for(var e in t)if(t[e]!==n[e])return!1;return!0})},E.findWhere=function(n,t){return E.where(n,t,!0)},E.max=function(n,t,e){if(!t&&E.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.max.apply(Math,n);if(!t&&E.isEmpty(n))return-1/0;var r={computed:-1/0,value:-1/0};return _(n,function(n,i,u){var o=t?t.call(e,n,i,u):n;o>=r.computed&&(r={value:n,computed:o})}),r.value},E.min=function(n,t,e){if(!t&&E.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.min.apply(Math,n);if(!t&&E.isEmpty(n))return 1/0;var r={computed:1/0,value:1/0};return _(n,function(n,i,u){var o=t?t.call(e,n,i,u):n;r.computed>o&&(r={value:n,computed:o})}),r.value},E.shuffle=function(n){var t,e=0,r=[];return _(n,function(n){t=E.random(e++),r[e-1]=r[t],r[t]=n}),r};var C=function(n){return E.isFunction(n)?n:function(t){return t[n]}};E.sortBy=function(n,t,e){var r=C(t);return E.pluck(E.map(n,function(n,t,i){return{value:n,index:t,criteria:r.call(e,n,t,i)}}).sort(function(n,t){var e=n.criteria,r=t.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return n.index<t.index?-1:1}),"value")};var A=function(n,t,e,r){var i={},u=C(t||E.identity);return _(n,function(t,o){var a=u.call(e,t,o,n);r(i,a,t)}),i};E.groupBy=function(n,t,e){return A(n,t,e,function(n,t,e){(E.has(n,t)?n[t]:n[t]=[]).push(e)})},E.countBy=function(n,t,e){return A(n,t,e,function(n,t){E.has(n,t)||(n[t]=0),n[t]++})},E.sortedIndex=function(n,t,e,r){e=null==e?E.identity:C(e);for(var i=e.call(r,t),u=0,o=n.length;o>u;){var a=u+o>>>1;i>e.call(r,n[a])?u=a+1:o=a}return u},E.toArray=function(n){return n?E.isArray(n)?a.call(n):n.length===+n.length?E.map(n,E.identity):E.values(n):[]},E.size=function(n){return null==n?0:n.length===+n.length?n.length:E.keys(n).length},E.first=E.head=E.take=function(n,t,e){return null==n?void 0:null==t||e?n[0]:a.call(n,0,t)},E.initial=function(n,t,e){return a.call(n,0,n.length-(null==t||e?1:t))},E.last=function(n,t,e){return null==n?void 0:null==t||e?n[n.length-1]:a.call(n,Math.max(n.length-t,0))},E.rest=E.tail=E.drop=function(n,t,e){return a.call(n,null==t||e?1:t)},E.compact=function(n){return E.filter(n,E.identity)};var q=function(n,t,e){return _(n,function(n){E.isArray(n)?t?o.apply(e,n):q(n,t,e):e.push(n)}),e};E.flatten=function(n,t){return q(n,t,[])},E.without=function(n){return E.difference(n,a.call(arguments,1))},E.uniq=E.unique=function(n,t,e,r){E.isFunction(t)&&(r=e,e=t,t=!1);var i=e?E.map(n,e,r):n,u=[],o=[];return _(i,function(e,r){(t?r&&o[o.length-1]===e:E.contains(o,e))||(o.push(e),u.push(n[r]))}),u},E.union=function(){return E.uniq(s.apply(r,arguments))},E.intersection=function(n){var t=a.call(arguments,1);return E.filter(E.uniq(n),function(n){return E.every(t,function(t){return E.indexOf(t,n)>=0})})},E.difference=function(n){var t=s.apply(r,a.call(arguments,1));return E.filter(n,function(n){return!E.contains(t,n)})},E.zip=function(){for(var n=a.call(arguments),t=E.max(E.pluck(n,"length")),e=Array(t),r=0;t>r;r++)e[r]=E.pluck(n,""+r);return e},E.object=function(n,t){if(null==n)return{};for(var e={},r=0,i=n.length;i>r;r++)t?e[n[r]]=t[r]:e[n[r][0]]=n[r][1];return e},E.indexOf=function(n,t,e){if(null==n)return-1;var r=0,i=n.length;if(e){if("number"!=typeof e)return r=E.sortedIndex(n,t),n[r]===t?r:-1;r=0>e?Math.max(0,i+e):e}if(g&&n.indexOf===g)return n.indexOf(t,e);for(;i>r;r++)if(n[r]===t)return r;return-1},E.lastIndexOf=function(n,t,e){if(null==n)return-1;var r=null!=e;if(x&&n.lastIndexOf===x)return r?n.lastIndexOf(t,e):n.lastIndexOf(t);for(var i=r?e:n.length;i--;)if(n[i]===t)return i;return-1},E.range=function(n,t,e){1>=arguments.length&&(t=n||0,n=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((t-n)/e),0),i=0,u=Array(r);r>i;)u[i++]=n,n+=e;return u},E.bind=function(n,t){if(n.bind===k&&k)return k.apply(n,a.call(arguments,1));var e=a.call(arguments,2);return function(){return n.apply(t,e.concat(a.call(arguments)))}},E.partial=function(n){var t=a.call(arguments,1);return function(){return n.apply(this,t.concat(a.call(arguments)))}},E.bindAll=function(n){var t=a.call(arguments,1);return 0===t.length&&(t=E.functions(n)),_(t,function(t){n[t]=E.bind(n[t],n)}),n},E.memoize=function(n,t){var e={};return t||(t=E.identity),function(){var r=t.apply(this,arguments);return E.has(e,r)?e[r]:e[r]=n.apply(this,arguments)}},E.delay=function(n,t){var e=a.call(arguments,2);return setTimeout(function(){return n.apply(null,e)},t)},E.defer=function(n){return E.delay.apply(E,[n,1].concat(a.call(arguments,1)))},E.throttle=function(n,t){var e,r,i,u,o=0,a=function(){o=new Date,i=null,u=n.apply(e,r)};return function(){var s=new Date,c=t-(s-o);return e=this,r=arguments,0>=c?(clearTimeout(i),i=null,o=s,u=n.apply(e,r)):i||(i=setTimeout(a,c)),u}},E.debounce=function(n,t,e){var r,i;return function(){var u=this,o=arguments,a=function(){r=null,e||(i=n.apply(u,o))},s=e&&!r;return clearTimeout(r),r=setTimeout(a,t),s&&(i=n.apply(u,o)),i}},E.once=function(n){var t,e=!1;return function(){return e?t:(e=!0,t=n.apply(this,arguments),n=null,t)}},E.wrap=function(n,t){return function(){var e=[n];return o.apply(e,arguments),t.apply(this,e)}},E.compose=function(){var n=arguments;return function(){for(var t=arguments,e=n.length-1;e>=0;e--)t=[n[e].apply(this,t)];return t[0]}},E.after=function(n,t){return 0>=n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},E.keys=b||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var e in n)E.has(n,e)&&(t[t.length]=e);return t},E.values=function(n){var t=[];for(var e in n)E.has(n,e)&&t.push(n[e]);return t},E.pairs=function(n){var t=[];for(var e in n)E.has(n,e)&&t.push([e,n[e]]);return t},E.invert=function(n){var t={};for(var e in n)E.has(n,e)&&(t[n[e]]=e);return t},E.functions=E.methods=function(n){var t=[];for(var e in n)E.isFunction(n[e])&&t.push(e);return t.sort()},E.extend=function(n){return _(a.call(arguments,1),function(t){if(t)for(var e in t)n[e]=t[e]}),n},E.pick=function(n){var t={},e=s.apply(r,a.call(arguments,1));return _(e,function(e){e in n&&(t[e]=n[e])}),t},E.omit=function(n){var t={},e=s.apply(r,a.call(arguments,1));for(var i in n)E.contains(e,i)||(t[i]=n[i]);return t},E.defaults=function(n){return _(a.call(arguments,1),function(t){if(t)for(var e in t)null==n[e]&&(n[e]=t[e])}),n},E.clone=function(n){return E.isObject(n)?E.isArray(n)?n.slice():E.extend({},n):n},E.tap=function(n,t){return t(n),n};var O=function(n,t,e,r){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof E&&(n=n._wrapped),t instanceof E&&(t=t._wrapped);var i=c.call(n);if(i!=c.call(t))return!1;switch(i){case"[object String]":return n==t+"";case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var u=e.length;u--;)if(e[u]==n)return r[u]==t;e.push(n),r.push(t);var o=0,a=!0;if("[object Array]"==i){if(o=n.length,a=o==t.length)for(;o--&&(a=O(n[o],t[o],e,r)););}else{var s=n.constructor,l=t.constructor;if(s!==l&&!(E.isFunction(s)&&s instanceof s&&E.isFunction(l)&&l instanceof l))return!1;for(var f in n)if(E.has(n,f)&&(o++,!(a=E.has(t,f)&&O(n[f],t[f],e,r))))break;if(a){for(f in t)if(E.has(t,f)&&!o--)break;a=!o}}return e.pop(),r.pop(),a};E.isEqual=function(n,t){return O(n,t,[],[])},E.isEmpty=function(n){if(null==n)return!0;if(E.isArray(n)||E.isString(n))return 0===n.length;for(var t in n)if(E.has(n,t))return!1;return!0},E.isElement=function(n){return!(!n||1!==n.nodeType)},E.isArray=w||function(n){return"[object Array]"==c.call(n)},E.isObject=function(n){return n===Object(n)},_(["Arguments","Function","String","Number","Date","RegExp"],function(n){E["is"+n]=function(t){return c.call(t)=="[object "+n+"]"}}),E.isArguments(arguments)||(E.isArguments=function(n){return!(!n||!E.has(n,"callee"))}),E.isFunction=function(n){return"function"==typeof n},E.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},E.isNaN=function(n){return E.isNumber(n)&&n!=+n},E.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==c.call(n)},E.isNull=function(n){return null===n},E.isUndefined=function(n){return void 0===n},E.has=function(n,t){return l.call(n,t)},E.noConflict=function(){return n._=t,this},E.identity=function(n){return n},E.times=function(n,t,e){for(var r=Array(n),i=0;n>i;i++)r[i]=t.call(e,i);return r},E.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};P.unescape=E.invert(P.escape);var T={escape:RegExp("["+E.keys(P.escape).join("")+"]","g"),unescape:RegExp("("+E.keys(P.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(n){E[n]=function(t){return null==t?"":(""+t).replace(T[n],function(t){return P[n][t]})}}),E.result=function(n,t){if(null==n)return null;var e=n[t];return E.isFunction(e)?e.call(n):e},E.mixin=function(n){_(E.functions(n),function(t){var e=E[t]=n[t];E.prototype[t]=function(){var n=[this._wrapped];return o.apply(n,arguments),F.call(this,e.apply(E,n))}})};var D=0;E.uniqueId=function(n){var t=++D+"";return n?n+t:t},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(n,t,e){var r;e=E.defaults({},e,E.templateSettings);var i=RegExp([(e.escape||I).source,(e.interpolate||I).source,(e.evaluate||I).source].join("|")+"|$","g"),u=0,o="__p+='";n.replace(i,function(t,e,r,i,a){return o+=n.slice(u,a).replace(R,function(n){return"\\"+L[n]}),e&&(o+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),u=a+t.length,t}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(t)return r(t,E);var s=function(n){return r.call(this,n,E)};return s.source="function("+(e.variable||"obj")+"){\n"+o+"}",s},E.chain=function(n){return E(n).chain()};var F=function(n){return this._chain?E(n).chain():n};E.mixin(E),_(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=r[n];E.prototype[n]=function(){var e=this._wrapped;return t.apply(e,arguments),"shift"!=n&&"splice"!=n||0!==e.length||delete e[0],F.call(this,e)}}),_(["concat","join","slice"],function(n){var t=r[n];E.prototype[n]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),define("underscore",function(n){return function(){var t;return t||n._}}(this)),define("vector2",[],function(){var n=function(n,t){this.x=n||0,this.y=t||0};return n.prototype={reset:function(n,t){return this.x=n,this.y=t,this},toString:function(n){n=n||3;var t=Math.pow(10,n);return"["+Math.round(this.x*t)/t+", "+Math.round(this.y*t)/t+"]"},clone:function(){return new n(this.x,this.y)},copyTo:function(n){n.x=this.x,n.y=this.y},copyFrom:function(n){this.x=n.x,this.y=n.y},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},magnitudeSquared:function(){return this.x*this.x+this.y*this.y},normalise:function(){var n=this.magnitude();return this.x=this.x/n,this.y=this.y/n,this},reverse:function(){return this.x=-this.x,this.y=-this.y,this},plusEq:function(n){return this.x+=n.x,this.y+=n.y,this},plusNew:function(t){return new n(this.x+t.x,this.y+t.y)},minusEq:function(n){return this.x-=n.x,this.y-=n.y,this},minusNew:function(t){return new n(this.x-t.x,this.y-t.y)},multiplyEq:function(n){return this.x*=n,this.y*=n,this},multiplyNew:function(n){var t=this.clone();return t.multiplyEq(n)},divideEq:function(n){return this.x/=n,this.y/=n,this},divideNew:function(n){var t=this.clone();return t.divideEq(n)},dot:function(n){return this.x*n.x+this.y*n.y},angle:function(n){return Math.atan2(this.y,this.x)*(n?1:Vector2Const.TO_DEGREES)},rotate:function(n,t){var e=Math.cos(n*(t?1:Vector2Const.TO_RADIANS)),r=Math.sin(n*(t?1:Vector2Const.TO_RADIANS));return Vector2Const.temp.copyFrom(this),this.x=Vector2Const.temp.x*e-Vector2Const.temp.y*r,this.y=Vector2Const.temp.x*r+Vector2Const.temp.y*e,this},equals:function(n){return this.x==n.x&&this.y==n.x},isCloseTo:function(n,t){return this.equals(n)?!0:(Vector2Const.temp.copyFrom(this),Vector2Const.temp.minusEq(n),t*t>Vector2Const.temp.magnitudeSquared())},rotateAroundPoint:function(n,t,e){Vector2Const.temp.copyFrom(this),Vector2Const.temp.minusEq(n),Vector2Const.temp.rotate(t,e),Vector2Const.temp.plusEq(n),this.copyFrom(Vector2Const.temp)},isMagLessThan:function(n){return n*n>this.magnitudeSquared()},isMagGreaterThan:function(n){return this.magnitudeSquared()>n*n}},Vector2Const={TO_DEGREES:180/Math.PI,TO_RADIANS:Math.PI/180,temp:new n},n}),define("player",["vector2"],function(n){var t=function(t,e){var r=this.pos=new n(t,e),i=this.vel=new n(0,0),u=this.drag=new n(.95,.96);this.gravity=1,this.width=24,this.height=43;var o=2;this.update=function(){i.x*=u.x,i.y*=u.y,i.y+=this.gravity,r.plusEq(i)},this.render=function(n){n.save(),n.fillStyle="rgba(255,255,255,1)",n.fillRect(this.getLeft(),this.getTop(),this.width,this.height),n.restore()},this.moveLeft=function(){this.vel.x-=o},this.moveRight=function(){console.log("right"),this.vel.x+=o},this.moveUp=function(){this.vel.y-=o},this.moveDown=function(){this.vel.y+=o},this.getLeft=function(){return r.x},this.getRight=function(){return r.x+this.width},this.getTop=function(){return r.y-this.height},this.getBottom=function(){return r.y}};return t}),define("keytracker",[],function(){var n=function(){this.Key={UP:38,LEFT:37,RIGHT:39,DOWN:40,SPACE:32},this.keysPressed={},this.keyDownListeners=[],this.keyUpListeners=[],this.isKeyDown=function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),this.keysPressed[n]},this.addKeyDownListener=function(n,t){"string"==typeof n&&(n=n.charCodeAt(0)),this.keyDownListeners.push({key:n,func:t})},this.addKeyUpListener=function(n,t){"string"==typeof n&&(n=n.charCodeAt(0)),this.keyUpListeners.push({key:n,func:t})}};return n}),define("controller",["keytracker"],function(n){var t={};return t=function(){var t=new n;return document.addEventListener("keydown",function(n){for(var e=0;t.keyDownListeners.length>e;e++)n.keyCode!=keyDownListeners[e].key||t.keysPressed[n.keyCode]||t.keyDownListeners[e].func();t.keysPressed[n.keyCode]=!0,console.log("key down "+n.keyCode)}),document.addEventListener("keyup",function(n){t.keysPressed[n.keyCode]=!1;for(var e=0;t.keyUpListeners.length>e;e++)n.keyCode==t.keyUpListeners[e].key&&t.keyUpListeners[e].func()}),t}}),define("creativejs",[],function(){var n={random:function(n,t){return void 0===n?(n=0,t=1):void 0===t&&(t=n,n=0),Math.random()*(t-n)+n},randomInteger:function(n,t){return void 0===t&&(t=n,n=0),Math.floor(Math.random()*(t+1-n))+n},clamp:function(n,t,e){if(t>e){var r=t;t=e,e=r}return Math.max(t,Math.min(n,e))},map:function(n,t,e,r,i,u){var o=(n-t)/(e-t)*(i-r)+r;return u?this.clamp(o,r,i):o},dist:function(n,t,e,r){return e-=n,r-=t,Math.sqrt(e*e+r*r)},scale:function(n,t,e,r,i){var u=e-t,o=i-r,a=(n-t)/u;return r+a*o},dist2D:function(n,t){var e=n.x-t.x,r=n.y-t.y;return e*e+r*r},radians:function(n){return n*Math.PI/180},degrees:function(n){return 180*n/Math.PI},rgb:function(n,t,e){return"rgb("+this.clamp(Math.round(n),0,255)+", "+this.clamp(Math.round(t),0,255)+", "+this.clamp(Math.round(e),0,255)+")"},rgba:function(n,t,e,r){return"rgba("+this.clamp(Math.round(n),0,255)+", "+this.clamp(Math.round(t),0,255)+", "+this.clamp(Math.round(e),0,255)+", "+this.clamp(r,0,1)+")"},hsl:function(n,t,e){return"hsl("+n+", "+this.clamp(t,0,100)+"%, "+this.clamp(e,0,100)+"%)"},hsla:function(n,t,e,r){return"hsla("+n+", "+this.clamp(t,0,100)+"%, "+this.clamp(e,0,100)+"%, "+this.clamp(r,0,1)+")"}};return n}),define("graphics",[],function(){var n={};return n.circle=function(n,t,e){this.beginPath(),this.arc(n,t,e,0,2*Math.PI,!0)},n.fillCircle=function(n,t,e){this.circle(n,t,e),this.fill(),this.beginPath()},n.strokeCircle=function(n,t,e){this.circle(n,t,e),this.stroke(),this.beginPath()},n.ellipse=function(n,t,e,r){this.beginPath();for(var i=0;2*Math.PI>i;i+=Math.PI/16)this.lineTo(n+Math.cos(i)*e/2,t+Math.sin(i)*r/2);this.closePath()},n.fillEllipse=function(n,t,e,r){this.ellipse(n,t,e,r),this.fill(),this.beginPath()},n.strokeEllipse=function(n,t,e,r){this.ellipse(n,t,e,r),this.stroke(),this.beginPath()},n.line=function(n,t,e,r){this.beginPath(),this.moveTo(n,t),this.lineTo(e,r),this.stroke(),this.beginPath()},n}),define("scene",[],function(){var n={render:function(n){n.strokeStyle="red",n.circle(20,20,200),n.stroke()}};return n}),define("app",["underscore","player","controller","creativejs","graphics","scene"],function(n,t,e,r,i,u){var o={};return o=function(){this.self=this,this.ctx=null,this.width=window.innerWidth,this.height=window.innerHeight,this.player,this.controller,this.scene},o.prototype.draw=function(){ctx.clearRect(0,0,canvas.width,canvas.height),this.player.update(),this.managePositions(this.player,this.controller),u.render(ctx),this.player.render(ctx)},o.prototype.setup=function(n,t,e){if(!t&&!e)var t=this.width,e=this.height;var r=this.initCanvas(n,t,e);return this.initVars(t,e),this.initObjects(),r},o.prototype.initCanvas=function(n){return canvas=document.getElementById(n),ctx=canvas.getContext("2d"),canvas},o.prototype.initVars=function(t,e){n.extend(ctx,i),this.ctx=ctx,this.width=t,this.height=e},o.prototype.initObjects=function(){this.player=new t(100,0),this.controller=new e},o.prototype.managePositions=function(n,t){0>n.pos.y?(n.pos.y=0,n.vel.y=0):n.getBottom()>this.height&&(n.pos.y=0,n.vel.y=0),t.isKeyDown(t.Key.LEFT)?n.moveLeft():t.isKeyDown(t.Key.RIGHT)&&n.moveRight(),t.isKeyDown(t.Key.UP)?n.moveUp():t.isKeyDown(t.Key.DOWN)&&n.moveDown()},o}),require.config({paths:{underscore:"../../components/underscore/underscore",creativejs:"../../libs/creativejs",vector2:"../../libs/Vector2",keytracker:"../../libs/KeyTracker",graphics:"../../libs/Graphics",jquery:"../../components/jquery/jquery"},shim:{underscore:{exports:"_"}}}),require(["app"],function(n){function t(){on1.running&&(on1.on&&(on1.count++,on1.tgt.draw()),requestAnimationFrame(t))}window.on1={count:0,running:!0,on:!1,tgt:null},window.addEventListener("load",t,!0);var e=function(t){function e(){window.on1.tgt=i,window.on1.on=!0,console.log("1 run")}function r(){window.on1.tgt=null,window.on1.on=!1,console.log("1 stop")}console.log(t);var i=new n,u=i.setup(t);u.addEventListener("mouseover",e),u.addEventListener("mouseout",r),console.log(u)};e("canvas1")}),define("main",function(){})})();